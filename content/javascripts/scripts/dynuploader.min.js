var reader={},file={},slice_size=1024e3;!function(e){var reference={file:"#file"};e.fn.uploader=function(options){var dynamic=Math.floor(4*Math.random()),settings=$.extend({},reference,options),idFile=("string"==typeof settings.file?settings.file:reference.file)+dynamic,appendto=this.attr("id")+dynamic;function readFile(input){input.files&&input.files[0]&&(reader=new FileReader,file=input.files[0],$.post("/jquery",{file_name:file.name,ajaxClearFile:!0},(function(data){upload_file(0)})))}function upload_file(start){var next_slice=start+slice_size+1,blob=file.slice(start,next_slice);reader.onloadend=function(event){event.target.readyState===FileReader.DONE&&$.ajax({url:"/jquery",type:"POST",data:{file_data:event.target.result,file:file.name,file_type:file.type,ajaxUploadFile:!0},cache:!1,error:function(data){},success:function(data){$(idFile+"_form").addClass("loading");var size_done=start+slice_size,percent_done=Math.floor(size_done/file.size*100),bar_height=$(idFile.trime().substring(1)+"_uploadedImg").height()/100*percent_done;next_slice<file.size?($(idFile+"_form").find(".imageUploadForm.loading .unveil").attr("style","--data-bottom:"+bar_height+"px;--data-percent:"+percent_done+" Percent"),upload_file(next_slice)):$.post("/jquery",{file_name:file.name,ajaxMoveFile:!0},(function(data){$(idFile+"_uploadedImg").addClass("loaded"),setTimeout((function(){$(idFile).val(""),$(idFile+"_uploadedImg").removeClass("loading").removeClass("loaded")}),5e3)}))}})},reader.readAsDataURL(blob)}0==$(idFile+"_"+appendto).length&&$("#"+appendto+" tfoot tr td div").html('<form id="'+idFile.trime().substring(1)+'_form" class="frmComItem"><div class="fileupload"><input type="file" name="file" id="'+idFile+'" style="outline: none;"><span class="button" id="'+idFile+'button">Browse for a File</span><div id="'+idFile.trime().substring(1)+'_uploadedImg" class="uploadedImg"><span class="unveil" style="--data-bottom:0px"></span></div></div></form>'),$((function(){$(document).on("change",idFile,(function(){readFile(this)}))}))}}(jQuery);