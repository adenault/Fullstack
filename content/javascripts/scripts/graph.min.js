function sliceSize(dataNum,dataTotal){return dataNum/dataTotal*360}function addSlice(id,sliceSize,pieElement,offset,sliceID,color,dataCount,data){var key=Object.keys(data)[dataCount].escapeSpecialChars();offset-=1;var sizeRotation=-179+sliceSize;$(pieElement).append("<div class='slice "+sliceID+"' data-name='"+key+"' data-value='"+data[key].value+"' data-deg='"+offset+"'><span></span></div>"),$(id+" ."+sliceID).css({transform:"rotate("+offset+"deg) translate3d(0,0,0)"}),$(id+" ."+sliceID+" span").css({transform:"rotate("+sizeRotation+"deg) translate3d(0,0,0)","background-color":color})}function iterateSlices(id,sliceSize,pieElement,offset,dataCount,sliceCount,color,data){var maxSize=179,sliceID="s"+dataCount+"-"+sliceCount;sliceSize<=179?addSlice(id,sliceSize,pieElement,offset,sliceID,color,dataCount,data):(addSlice(id,179,pieElement,offset,sliceID,color,dataCount,data),iterateSlices(id,sliceSize-179,pieElement,offset+179,dataCount,sliceCount+1,color,data))}!function($){jQuery.fn.graph=function(data){var appendto=void 0!==$(this).attr("class")&&!1!==$(this).attr("class")?"."+$(this).attr("class"):"#"+$(this).attr("id"),randomColor="#"+Math.floor(16777215*Math.random()).toString(16),colour="string"==typeof data.color?data.color:randomColor,total=jQuery.map(data.data,(function(n,i){return n.value})).reduce((a,b)=>a+b,0),offset=0,i=0,pieElement=appendto+" .pie-chart__pie",dataElement=appendto+" .pie-chart__legend";switch($(this).css({"text-align":"center"}),data.type.toLowerCase()){case"pie":$(appendto).html('<div class="pie-chart__pie"></div><ul class="pie-chart__legend"></ul>');for(const[key,value]of Object.entries(data.data)){var size=sliceSize(value.value,total);iterateSlices(appendto,size,pieElement,offset,i,0,colour="string"==typeof value.color&&""!==value.color?value.color:"#"+Math.floor(16777215*Math.random()).toString(16),data.data),$("<li><em>"+key.toUpperCase()+"</em><span>"+value.value+"</span></li>").appendTo(dataElement),$(dataElement+" li:nth-child("+(i+1)+")").css("border-color",colour),offset+=size,i++}break;case"circle":var percentage=(data=data.data[Object.keys(data.data)[0]]).value;colour="string"==typeof data.color&&""!==data.color?data.color:"#"+Math.floor(16777215*Math.random()).toString(16),$(appendto).html('<div class="hue-wheel" style="background-image:conic-gradient('+colour+" 0, "+colour+" "+percentage+'%, #ffffff 0, #ffffff 100%),radial-gradient(#fff 50%, transparent calc(50% + 2px));"><h3 class="caption-inside">'+percentage+"%</h3></div>");break;default:$(appendto).html('<ul class="jsgraph"></ul>');for(const[key,value]of Object.entries(data.data)){colour="string"==typeof value.color&&""!==value.color?value.color:"#"+Math.floor(16777215*Math.random()).toString(16);var th=value.value/total*100+"%";$("<li><em>"+key.toUpperCase()+'</em><span style="height:'+th+";background:"+colour+'">'+value.value+"</span></li>").appendTo(appendto+" .jsgraph")}}}}(jQuery),String.prototype.escapeSpecialChars=function(){return this.replace(/\\n/g,"\\n").replace(/\\'/g,"\\'").replace(/\\"/g,'\\"').replace(/\\&/g,"\\&").replace(/\\r/g,"\\r").replace(/\\t/g,"\\t").replace(/\\b/g,"\\b").replace(/\\f/g,"\\f")};